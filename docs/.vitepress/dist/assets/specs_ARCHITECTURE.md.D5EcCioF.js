import{_ as t,o as s,c as a,ae as o}from"./chunks/framework.BD9pLfSD.js";const h=JSON.parse('{"title":"Prova Architecture","description":"","frontmatter":{},"headers":[],"relativePath":"specs/ARCHITECTURE.md","filePath":"specs/ARCHITECTURE.md"}'),r={name:"specs/ARCHITECTURE.md"};function n(i,e,l,c,p,d){return s(),a("div",null,[...e[0]||(e[0]=[o(`<h1 id="prova-architecture" tabindex="-1">Prova Architecture <a class="header-anchor" href="#prova-architecture" aria-label="Permalink to &quot;Prova Architecture&quot;">​</a></h1><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p>Prova is an <strong>Experimental Research Prototype</strong> for Native AOT testing. It is a standalone project independent of Microsoft. While it is a custom runner, it supports the <strong>Microsoft Testing Platform (MTP)</strong> via a hybrid adapter.</p></div><h2 id="directory-structure" tabindex="-1">Directory Structure <a class="header-anchor" href="#directory-structure" aria-label="Permalink to &quot;Directory Structure&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>src/</span></span>
<span class="line"><span>  Prova.Core/           # Runtime Library (Attributes, Assert, Interfaces)</span></span>
<span class="line"><span>  Prova.Generators/     # Roslyn Source Generators (Analysis, Emission using SyntaxProvider)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>tests/</span></span>
<span class="line"><span>  Prova.Core.Tests/     # Unit tests for the runtime library</span></span>
<span class="line"><span>  Prova.Generators.Tests/ # Integration tests for the Source Generator (Verify)</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>samples/</span></span>
<span class="line"><span>  Prova.Demo/           # Showcase Console App</span></span>
<span class="line"><span>  Prova.MtpSample/      # Microsoft Testing Platform integration sample</span></span>
<span class="line"><span>  Prova.Skugga.Demo/    # Skugga (Mocking) integration sample</span></span></code></pre></div><h2 id="the-pipeline" tabindex="-1">The Pipeline <a class="header-anchor" href="#the-pipeline" aria-label="Permalink to &quot;The Pipeline&quot;">​</a></h2><ol><li><p><strong>Code Analysis (<code>SyntaxAnalyzer</code>)</strong>:</p><ul><li>Scans for <code>[Fact]</code>, <code>[Theory]</code>.</li><li>Extracts Metadata: <code>[Retry]</code>, <code>[Focus]</code>, <code>[Trait]</code>, XML Docs.</li><li>Validates Signatures (Must be <code>void</code> or <code>Task</code>).</li></ul></li><li><p><strong>Model Creation</strong>:</p><ul><li>Converts Roslyn Symbols (<code>IMethodSymbol</code>) into simple Records (<code>TestMethodModel</code>).</li><li>Resolves dependencies (<code>IClassFixture</code>, <code>ITestOutputHelper</code>).</li></ul></li><li><p><strong>Code Emission (<code>SourceEmitter</code>)</strong>:</p><ul><li>Generates <code>Prova.Generated.TestRunnerExecutor</code>.</li><li>Injects <code>Main</code> entry point logic.</li><li>Handles Try/Catch, Interlocked counters, and Reporter callbacks.</li></ul></li></ol><h2 id="key-components" tabindex="-1">Key Components <a class="header-anchor" href="#key-components" aria-label="Permalink to &quot;Key Components&quot;">​</a></h2><h3 id="itestreporter" tabindex="-1"><code>ITestReporter</code> <a class="header-anchor" href="#itestreporter" aria-label="Permalink to &quot;\`ITestReporter\`&quot;">​</a></h3><p>Abstraction for reporting results. Currently <code>ConsoleReporter</code> is implemented, but this allows for:</p><ul><li>TRX Reporters (CI)</li><li>JSON Reporters</li><li>GitHub Actions Reporters</li></ul><h3 id="itestoutputhelper" tabindex="-1"><code>ITestOutputHelper</code> <a class="header-anchor" href="#itestoutputhelper" aria-label="Permalink to &quot;\`ITestOutputHelper\`&quot;">​</a></h3><p>Captures output <em>per test</em>.</p><ul><li>Prova generates a local <code>TestOutputHelper</code> for each test.</li><li>Output is passed to the reporter only upon test completion (to prevent interleaved console garbage).</li></ul><h3 id="iclassfixture-t" tabindex="-1"><code>IClassFixture&lt;T&gt;</code> <a class="header-anchor" href="#iclassfixture-t" aria-label="Permalink to &quot;\`IClassFixture&lt;T&gt;\`&quot;">​</a></h3><p>Simple Dependency Injection.</p><ul><li><strong>Isolated Scope</strong>: Currently created per-test for maximum AOT safety and parallel isolation.</li><li><strong>Injected</strong>: Passed to the Test Class constructor.</li><li><strong>Lifecycle</strong>: <code>InitializeAsync</code> -&gt; Test Runs -&gt; <code>DisposeAsync</code>.</li></ul>`,16)])])}const m=t(r,[["render",n]]);export{h as __pageData,m as default};
